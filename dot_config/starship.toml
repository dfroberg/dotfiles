format = """
$username\
$hostname\
$directory\
$git_branch\
$git_status\
$fill\
$python \
$status\
$custom.kubeStatus\
$cmd_duration\
$line_break\
$character
"""

add_newline = false
command_timeout = 1000

[username]
style_user = "yellow"
style_root = "red"
format = "[$user]($style)"
show_always = false

[hostname]
ssh_only = true
format = "[@$hostname]($style) in "
style = "green"

[directory]
truncation_length = 3
format = "[$path]($style)[$read_only]($read_only_style) "
style = "blue"
read_only = " ï€£"
truncation_symbol = "../"
truncate_to_repo = true
fish_style_pwd_dir_length = 1

[git_branch]
format = "on [$symbol$branch]($style) "
style = "purple"
symbol = "ï„¦ "

[git_status]
format = '([$all_status$ahead_behind]($style) )'
style = "purple"
conflicted = "ï— "
ahead = "ï€› "
behind = "ï€š "
diverged = "ïš– "
up_to_date = "ï˜ "
untracked = "ï™ "
stashed = "ï€œ "
modified = "ïª "
staged = "ï• "
renamed = "ïš "
deleted = "ï– "

[fill]
symbol = " "

[python]
format = '[${symbol}${pyenv_prefix}(${version} )(\($virtualenv\) )]($style)'
symbol = "ğŸ "

[status]
disabled = false
format = '[$symbol]($style) '
symbol = "âœ˜ "
success_symbol = "âœ” "
style = "red"

[cmd_duration]
min_time = 2_000
format = "took [$duration]($style) "
style = "yellow"

[character]
success_symbol = "[î‰](green)"
error_symbol = "[î‰](green)"
vicmd_symbol = "[î€](purple)"

[custom.talos]
command = "yq e '.context' ~/.talos/config"
when = "test -f ~/.talos/config"
symbol = "ğŸ¦"
style = "yellow"
format = '\[[$symbol $output]($style)\] '
shell = ["bash", "--noprofile", "--norc"]

[custom.kubens]
command = "kubens --current"
when = "test -f ~/.kube/config && test -x $(which kubens)"
symbol = "ï‘³"
style = "green"
format = '\[[$symbol $output]($style)\] '
shell = ["bash", "--noprofile", "--norc"]

[custom.kubeStatus]
command = "kubectl get nodes --no-headers | awk '$2 ~ /^Ready/ { ready++ } END { print ready\"/\"NR }'"
when = "test -f ~/.kube/config"
symbol = "ï¦Œ"
style = "cyan"
format = '\[[$symbol $output]($style)\] '
shell = ["bash", "--noprofile", "--norc"]

[custom.kubeNotReady]
command = "kubectl get nodes --no-headers | awk '$2~\"NotReady\" {printf \"%s%s\",sep,$1; sep=\", \"} END{print \"\"}'"
when = "test \"$(kubectl get nodes --no-headers | awk '{print $2}' | uniq)\" != \"Ready\""
symbol = "ï¦"
style = "red"
format = '\[[$symbol $output]($style)\] '
shell = ["bash", "--noprofile", "--norc"]
